<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SVNTeX Admin</title>
    <link rel="stylesheet" href="/assets/css/style.css" />
    <style>body{font-family:system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, sans-serif;padding:20px} .login-card{max-width:420px;margin:8vh auto;padding:24px;border:1px solid #e2e8f0;border-radius:12px;background:#fff} .grid{display:grid;gap:10px} .muted{color:#64748b}</style>
  </head>
  <body>
    <div class="login-card">
      <h1>SVNTeX Admin</h1>
      <p class="muted">Sign in to manage SVNTeX.</p>
      <div class="grid">
        <label>Email or Username <input id="login_id" type="text" /></label>
        <label>Password <input id="password" type="password" /></label>
        <button id="btnLogin">Login</button>
        <div id="msg" class="muted" aria-live="polite"></div>
      </div>
    </div>
    <script>
    (function(){
      const b=document.getElementById('btnLogin'); const msg=document.getElementById('msg');
      b.addEventListener('click', async ()=>{
        msg.textContent='Signing in...';
        try {
          const fd = new FormData();
          fd.append('action','svntex2_do_login');
          fd.append('login_id', document.getElementById('login_id').value);
          fd.append('password', document.getElementById('password').value);
          // Fetch admin-ajax on same origin
          const r = await fetch('/wp-admin/admin-ajax.php',{ method:'POST', body: fd, credentials:'include' });
          const j = await r.json();
          if(j.success){ location.href='/admin/panel.html'; }
          else { msg.textContent = (j.data && j.data.message) || 'Login failed'; }
        } catch(e){ msg.textContent='Network error'; }
      });
    })();
    </script>
  </body>
</html>
