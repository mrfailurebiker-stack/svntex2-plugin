<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SVNTeX Member v2</title>
    <link rel="stylesheet" href="member.css" />
  </head>
  <body>
    <script>
      (function(){
        var isProd = /(^|\.)svntex\.com$/i.test(location.hostname); var onWww = /^www\./i.test(location.hostname);
        if(isProd && !onWww){ location.replace('https://www.svntex.com/member-v2/app.html'+location.hash); }
      })();
    </script>
    <div class="member-shell">
      <header class="topbar">
        <div class="brand">SVNTeX Member</div>
        <nav>
          <a href="#home" class="active">Home</a>
          <a href="#products">Products</a>
          <a href="#cart">Cart</a>
          <a href="#wallet">Wallet</a>
          <a href="#orders">Orders</a>
          <a href="#referrals">Referrals</a>
          <a href="#kyc">KYC</a>
          <a href="#withdrawals">Withdrawals</a>
          <a href="#support">Support</a>
          <a href="#profile">Profile</a>
          <a id="logout" href="#logout">Logout</a>
        </nav>
      </header>
      <main class="content">
        <section id="home" class="section">
          <h2>Welcome</h2>
          <div id="hello" class="muted">Loading...</div>
          <div class="grid" style="grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:12px" id="homeGrid"></div>
        </section>
        <section id="products" class="section hidden">
          <h2>Products</h2>
          <div class="grid columns-4" style="align-items:end;max-width:980px">
            <label>Search<input id="prodSearch" placeholder="Search products"></label>
            <label>Category<select id="prodCat"><option value="">All</option></select></label>
            <label>Availability<select id="prodAvail"><option value="">Any</option><option value="instock">In stock</option><option value="outofstock">Out of stock</option></select></label>
            <label>Sort<select id="prodSort"><option value="date">Newest</option><option value="title">Alphabetical</option><option value="price_asc">Price: Low to High</option><option value="price_desc">Price: High to Low</option></select></label>
          </div>
          <div class="grid" style="grid-auto-flow:column;gap:10px;margin:8px 0"><button id="prodApply">Apply</button></div>
          <div class="grid" style="grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px" id="prodGrid">Loading...</div>
        </section>
        <section id="cart" class="section hidden">
          <h2>Cart</h2>
          <div id="cartWrap" class="list">Loading…</div>
          <form id="chkForm" class="grid" style="max-width:560px;margin-top:10px">
            <label>Name<input name="name" required></label>
            <label>Line 1<input name="line1" required></label>
            <label>Line 2<input name="line2"></label>
            <label>City<input name="city" required></label>
            <label>State<input name="state" required></label>
            <label>PIN Code<input name="zip" required></label>
            <label>Phone<input name="phone" required></label>
            <label>Payment<select name="payment_method"><option value="cod">Cash on delivery</option><option value="wallet">Wallet</option></select></label>
            <div><button type="submit">Checkout</button></div>
            <div id="chkMsg" class="muted"></div>
          </form>
        </section>
        <section id="orders" class="section hidden">
          <h2>Orders</h2>
          <div id="ordersList" class="list">Loading…</div>
        </section>
        <!-- Order detail modal -->
        <div id="orderModal" class="modal hidden" style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(15,23,42,.6);z-index:50">
          <div class="card" style="max-width:720px;width:92%;padding:14px 16px;background:#0b1220;border:1px solid rgba(255,255,255,.12);border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.35)">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px">
              <h3 id="ordTitle" style="margin:0">Order</h3>
              <button id="ordClose" class="secondary" style="padding:.35rem .6rem">Close</button>
            </div>
            <div id="orderDetail" class="list">Loading…</div>
          </div>
        </div>
        <section id="wallet" class="section hidden">
          <h2>Wallet</h2>
          <div id="wBalance" class="kpi">--</div>
          <div id="wTx" class="list" style="margin-top:10px">No transactions.</div>
        </section>
        <section id="referrals" class="section hidden">
          <h2>Referrals</h2>
          <div id="refCode" class="muted">Loading...</div>
          <div id="refList" class="list" style="margin-top:6px">No referrals yet.</div>
        </section>
        <section id="kyc" class="section hidden">
          <h2>KYC</h2>
          <form id="kycForm" class="grid" style="max-width:540px">
            <label>Full Name<input name="full_name" required></label>
            <label>Address<textarea name="address" rows="2"></textarea></label>
            <label>Aadhaar / ID<input name="doc_number"></label>
            <label>Document (image/pdf)<input type="file" id="kycDoc" accept="image/*,application/pdf"></label>
            <button type="submit">Submit KYC</button>
            <div id="kycMsg" class="muted"></div>
          </form>
          <div style="margin-top:12px" id="kycStatus" class="muted">Status: --</div>
        </section>
        <section id="withdrawals" class="section hidden">
          <h2>Withdrawals</h2>
          <form id="wdForm" class="grid" style="max-width:400px">
            <label>Amount<input type="number" step="0.01" min="1" name="amount" required></label>
            <label>Method<select name="method"><option value="bank">Bank</option><option value="upi">UPI</option></select></label>
            <label>Destination<input name="destination" placeholder="Acct/UPI ID"></label>
            <div><button type="submit">Request Withdraw</button></div>
            <div id="wdMsg" class="muted"></div>
          </form>
          <div id="wdList" class="list" style="margin-top:10px">Loading…</div>
        </section>
        <section id="support" class="section hidden">
          <h2>Support</h2>
          <form id="spForm" class="grid" style="max-width:560px">
            <label>Subject<input name="subject" required></label>
            <label>Message<textarea name="message" rows="3" required></textarea></label>
            <div><button type="submit">Submit Ticket</button></div>
            <div id="spMsg" class="muted"></div>
          </form>
        </section>
        <section id="profile" class="section hidden">
          <h2>Profile</h2>
          <form id="profileForm" class="grid" style="max-width:540px">
            <label>Email<input name="email" required></label>
            <label>First name<input name="first_name"></label>
            <label>Last name<input name="last_name"></label>
            <label>Mobile<input name="mobile"></label>
            <div><button type="submit">Save</button></div>
            <div id="pMsg" class="muted"></div>
          </form>
        </section>
      </main>
    </div>
    <script>
    (async function(){
      async function getNonce(){ try{ const r=await fetch('/wp-admin/admin-ajax.php?action=svntex2_get_rest_nonce',{credentials:'include'}); const j=await r.json(); if(j.success) return j.data.nonce; }catch(e){} return null; }
      const nonce = await getNonce(); const headers = nonce?{'X-WP-Nonce':nonce}:{ };
      const meRes = await fetch('/wp-json/wp/v2/users/me',{credentials:'include',headers});
      if(!meRes.ok){ location.href='/member-v2/'; return; }
      const me = await meRes.json();
      document.getElementById('hello').textContent = 'Hello, '+(me.name||me.username||'member');

  const sections=['home','products','cart','wallet','orders','referrals','kyc','withdrawals','support','profile'];
      function show(name){ sections.forEach(id=>{ const el=document.getElementById(id); if(!el) return; if(id===name) el.classList.remove('hidden'); else el.classList.add('hidden'); });
        document.querySelectorAll('.topbar nav a').forEach(a=>{ if(a.getAttribute('href')==='#'+name) a.classList.add('active'); else a.classList.remove('active'); }); }
      function route(){ const hash=location.hash||'#home'; const name=hash.replace('#',''); show(sections.includes(name)?name:'home'); }
      window.addEventListener('hashchange', route); route();

      // Home Featured + Catalog
      async function loadHome(){
        try{
          const r = await fetch('/wp-json/svntex2/v1/catalog?per_page=8');
          const j = await r.json(); const items = j.items||[];
          const grid = document.getElementById('homeGrid');
          grid.innerHTML = items.map(x=>`<div class="list-item" style="flex-direction:column;align-items:flex-start"><a href="/member-v2/product.html?id=${x.id}"><img src="${x.thumbnail_url||''}" alt="" style="width:100%;height:140px;object-fit:cover;border-radius:8px"></a><div style="margin-top:6px"><strong><a href="/member-v2/product.html?id=${x.id}" style="text-decoration:none;color:inherit">${x.title}</a></strong></div><div class="meta">₹${(x.price||0).toFixed(2)}</div></div>`).join('') || '<div class="muted">No items.</div>';
        }catch(e){ document.getElementById('homeGrid').textContent='Failed to load'; }
      }
      async function loadCatalog(){
        try{
          const qs = new URLSearchParams();
          const s=document.getElementById('prodSearch')?.value; if(s) qs.set('search', s);
          const c=document.getElementById('prodCat')?.value; if(c) qs.set('category', c);
          const a=document.getElementById('prodAvail')?.value; if(a) qs.set('availability', a);
          const sort=document.getElementById('prodSort')?.value; if(sort) qs.set('sort', sort);
          const r = await fetch('/wp-json/svntex2/v1/catalog?per_page=24'+(qs.toString()?('&'+qs.toString()):''));
          const j = await r.json(); const items = j.items||[]; const grid = document.getElementById('prodGrid');
          grid.innerHTML = items.map(x=>`<div class="list-item" style="flex-direction:column;align-items:flex-start"><a href="/member-v2/product.html?id=${x.id}"><img src="${x.thumbnail_url||''}" alt="" style="width:100%;height:160px;object-fit:cover;border-radius:8px"></a><div style="margin-top:6px"><strong><a href="/member-v2/product.html?id=${x.id}" style="text-decoration:none;color:inherit">${x.title}</a></strong></div><div class="meta">MRP ₹${(x.mrp||0).toFixed(2)} · Price ₹${(x.price||0).toFixed(2)}</div><div class="grid" style="grid-auto-flow:column;gap:8px;margin-top:6px"><a class="secondary" href="/member-v2/product.html?id=${x.id}" style="text-decoration:none;padding:.35rem .6rem;border:1px solid rgba(255,255,255,.3);border-radius:8px">View</a><button class="buyNow" data-id="${x.id}" style="padding:.35rem .6rem">Buy Now</button></div></div>`).join('') || '<div class="muted">No items.</div>';
          // bind Buy Now
          grid.querySelectorAll('button.buyNow').forEach(btn=>{ btn.addEventListener('click', async ()=>{ const pid=btn.getAttribute('data-id'); if(!publicNonce) publicNonce = await getPublicNonce(); await fetch('/wp-json/svntex2/v1/cart/clear', { method:'POST', headers:{'X-SVNTeX2-Nonce': publicNonce} }); await fetch('/wp-json/svntex2/v1/cart/add', { method:'POST', headers:{'Content-Type':'application/json','X-SVNTeX2-Nonce': publicNonce }, body: JSON.stringify({ product_id: pid, variant_id: 0, qty: 1 }) }); location.hash='#cart'; document.getElementById('chkForm').scrollIntoView({behavior:'smooth'}); }); });
        }catch(e){ document.getElementById('prodGrid').textContent='Failed to load'; }
      }
      // load categories for filter
      try{
        const r=await fetch('/wp-json/wp/v2/svntex_category?per_page=100'); const cats=r.ok?await r.json():[]; const sel=document.getElementById('prodCat'); if(sel){ sel.innerHTML = '<option value="">All</option>'+cats.map(c=>`<option value="${c.id}">${c.name}</option>`).join(''); }
      }catch(e){}
      document.getElementById('prodApply')?.addEventListener('click', (e)=>{ e.preventDefault(); loadCatalog(); });

      // Cart
      let publicNonce='';
      async function getPublicNonce(){ try{ const r=await fetch('/wp-json/svntex2/v1/public-nonce'); const j=await r.json(); return j.nonce||''; }catch(e){ return ''; } }
      async function loadCart(){
        try{
          if(!publicNonce) publicNonce = await getPublicNonce();
          const r = await fetch('/wp-json/svntex2/v1/cart'); const j = await r.json();
          const lines = (j && j.lines)||[];
          const wrap = document.getElementById('cartWrap');
          if(!lines.length){ wrap.textContent='Your cart is empty.'; return; }
          wrap.innerHTML = lines.map(x=>`<div class="list-item" data-pid="${x.product_id}" data-vid="${x.variant_id||0}">
              <div>Product ${x.product_id}${x.variant_id?(' · Var '+x.variant_id):''}
                <span class="muted" style="margin-left:6px">Qty</span>
                <input type="number" class="qty" min="1" value="${x.qty}" style="width:70px;margin-left:6px" />
                <button class="uBtn secondary" style="margin-left:6px;padding:.25rem .5rem">Update</button>
                <button class="rBtn danger" style="margin-left:6px;padding:.25rem .5rem">Remove</button>
              </div>
              <div class="meta">₹${x.subtotal.toFixed(2)} + Delivery ₹${x.delivery.toFixed(2)}</div>
            </div>`).join('') +
            `<div class="list-item"><strong>Total</strong><div class="meta">Items ₹${(j.items_total||0).toFixed(2)} · Delivery ₹${(j.delivery_total||0).toFixed(2)} · Grand ₹${(j.grand_total||0).toFixed(2)}</div></div>`;
          // Bind actions
          wrap.querySelectorAll('.uBtn').forEach(btn=>{
            btn.addEventListener('click', async ()=>{
              const row = btn.closest('.list-item'); const pid = row.getAttribute('data-pid'); const vid = row.getAttribute('data-vid');
              const qty = Math.max(1, parseInt(row.querySelector('input.qty').value||'1',10));
              btn.disabled=true; try{
                const r = await fetch('/wp-json/svntex2/v1/cart/update', { method:'POST', headers:{ 'Content-Type':'application/json','X-SVNTeX2-Nonce': publicNonce }, body: JSON.stringify({ product_id:pid, variant_id:vid, qty }) });
                await r.json();
                loadCart();
              } finally { btn.disabled=false; }
            });
          });
          wrap.querySelectorAll('.rBtn').forEach(btn=>{
            btn.addEventListener('click', async ()=>{
              const row = btn.closest('.list-item'); const pid = row.getAttribute('data-pid'); const vid = row.getAttribute('data-vid');
              btn.disabled=true; try{
                const r = await fetch('/wp-json/svntex2/v1/cart/remove', { method:'POST', headers:{ 'Content-Type':'application/json','X-SVNTeX2-Nonce': publicNonce }, body: JSON.stringify({ product_id:pid, variant_id:vid }) });
                await r.json();
                loadCart();
              } finally { btn.disabled=false; }
            });
          });
        }catch(e){ document.getElementById('cartWrap').textContent='Failed to load'; }
      }
      const chkMsg = document.getElementById('chkMsg');
      document.getElementById('chkForm').addEventListener('submit', async (e)=>{
        e.preventDefault(); chkMsg.textContent='Placing order…'; if(!publicNonce) publicNonce = await getPublicNonce();
        const data = Object.fromEntries(new FormData(e.target).entries());
        if(data.payment_method==='online'){
          try{
            const totals = await fetch('/wp-json/svntex2/v1/cart').then(r=>r.json());
            const create = await fetch('/wp-json/svntex2/v1/payments/create', { method:'POST', headers:{ 'Content-Type':'application/json','X-SVNTeX2-Nonce': publicNonce }, body: JSON.stringify({ gateway:'razorpay', amount: totals.grand_total }) });
            const cj = await create.json(); if(!create.ok){ chkMsg.textContent=(cj.error||'Gateway create failed'); return; }
            // TODO: invoke real gateway checkout here; simulate immediate success
            const fakePaymentId = 'pay_'+Math.random().toString(36).slice(2);
            const conf = await fetch('/wp-json/svntex2/v1/payments/confirm', { method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify({ order_id: cj.order_id, payment_id: fakePaymentId }) });
            const ok = await conf.json(); if(conf.ok && ok.ok){ chkMsg.textContent='Payment success. Order #'+cj.order_id; loadCart(); loadOrders(); }
            else { chkMsg.textContent=(ok && ok.error)||'Payment confirm failed'; }
          }catch(err){ chkMsg.textContent='Payment failed'; }
          return;
        }
        const r = await fetch('/wp-json/svntex2/v1/checkout', { method:'POST', headers:{'X-SVNTeX2-Nonce': publicNonce}, body: new URLSearchParams(data) });
        const j = await r.json();
        if(r.ok && j.order_id){ chkMsg.textContent='Order placed: #'+j.order_id; loadCart(); loadOrders(); }
        else { chkMsg.textContent=(j && (j.error||j.message))||'Failed'; }
      });

      // Orders
      async function loadOrders(){
        try{
          const r = await fetch('/wp-json/svntex2/v1/orders', { credentials:'include', headers });
          const j = await r.json(); const items = (j && j.items)||[];
          const html = items.map(o=>`<div class="list-item" data-oid="${o.id}" style="cursor:pointer"><div>Order #${o.id} · ${o.status}</div><div class="meta">₹${(o.grand_total||0).toFixed(2)} · ${o.created_at||''}</div></div>`).join('') || 'No orders yet.';
          const wrap = document.getElementById('ordersList'); wrap.innerHTML = html;
          // Click to open modal
          wrap.querySelectorAll('.list-item[data-oid]').forEach(el=>{
            el.addEventListener('click', async ()=>{ const oid = el.getAttribute('data-oid'); if(!publicNonce) publicNonce = await getPublicNonce(); openOrderModal(oid); });
          });
        }catch(e){ document.getElementById('ordersList').textContent='Failed to load'; }
      }

      // Modal helpers
      const orderModal = document.getElementById('orderModal');
      const orderDetail = document.getElementById('orderDetail');
      const ordTitle = document.getElementById('ordTitle');
      document.getElementById('ordClose').addEventListener('click', ()=>{ orderModal.classList.add('hidden'); });
      function openOrderModal(id){ ordTitle.textContent = 'Order #'+id; orderDetail.textContent='Loading…'; orderModal.classList.remove('hidden'); fetchOrderDetail(id); }
      async function fetchOrderDetail(id){
        try{
          if(!publicNonce) publicNonce = await getPublicNonce();
          const r = await fetch('/wp-json/svntex2/v1/order/'+id, { headers: { 'X-SVNTeX2-Nonce': publicNonce } });
          const j = await r.json();
          if(!r.ok){ orderDetail.textContent = (j && (j.error||j.message)) || 'Failed'; return; }
          const addr = j.address||{};
          const items = j.items||[];
          const lines = items.map(x=>`<div class="list-item"><div>Product ${x.product_id}${x.variant_id?(' · Var '+x.variant_id):''} · Qty ${x.qty}</div><div class="meta">₹${Number(x.subtotal||0).toFixed(2)}</div></div>`).join('') || '<div class="muted">No items.</div>';
          orderDetail.innerHTML = `
            <div class="list-item"><strong>Status</strong><div class="meta">${j.status||'-'}</div></div>
            <div class="list-item"><strong>Totals</strong><div class="meta">Items ₹${Number(j.items_total||0).toFixed(2)} · Delivery ₹${Number(j.delivery_total||0).toFixed(2)} · Grand ₹${Number(j.grand_total||0).toFixed(2)}</div></div>
            <div class="list-item"><strong>Ship To</strong><div class="meta">${[addr.name,addr.line1,addr.line2,addr.city,addr.state,addr.zip,addr.country].filter(Boolean).join(', ')||'-'}</div></div>
            <div style="margin-top:8px"></div>
            ${lines}
          `;
        }catch(e){ orderDetail.textContent='Failed'; }
      }

      // Wallet
      async function loadWallet(){
        try{
          const [bal, tx] = await Promise.all([
            fetch('/wp-json/svntex2/v1/wallet/balance',{credentials:'include',headers}).then(r=>r.json()),
            fetch('/wp-json/svntex2/v1/wallet/transactions?per_page=20',{credentials:'include',headers}).then(r=>r.json())
          ]);
          document.getElementById('wBalance').textContent = (bal && (bal.balance||bal.amount||0));
          const items=(tx && tx.items)||[]; document.getElementById('wTx').innerHTML = items.map(x=>`<div class="list-item"><div>${x.type} · ${x.category} · ${x.amount}</div><div class="meta">${x.created_at}</div></div>`).join('') || 'No transactions.';
        }catch(e){ document.getElementById('wTx').textContent='Failed to load'; }
      }
      // Referrals
      async function loadRef(){
        try{
          const r = await fetch('/wp-json/svntex2/v1/referrals/mine',{credentials:'include',headers});
          const j = await r.json();
          document.getElementById('refCode').textContent = 'Your referral code: '+(j.code||j.ref_code||me.id);
          const items = j.items || []; document.getElementById('refList').innerHTML = items.map(x=>`<div class="list-item"><div>${x.referee_id} ${x.qualified?'· qualified':''}</div><div class="meta">${x.created_at||''}</div></div>`).join('') || 'No referrals yet.';
        }catch(e){ document.getElementById('refList').textContent='Failed to load'; }
      }
      // KYC
      const kycMsg=document.getElementById('kycMsg');
      async function loadKyc(){ try{ const r=await fetch('/wp-json/svntex2/v1/kyc/me',{credentials:'include',headers}); const j=await r.json(); document.getElementById('kycStatus').textContent='Status: '+(j.status||'--'); }catch(e){}}
      document.getElementById('kycForm').addEventListener('submit', async (e)=>{
        e.preventDefault(); kycMsg.textContent='Submitting...';
        const fd = new FormData(e.target);
        const doc = document.getElementById('kycDoc').files[0]; if(doc) fd.append('document', doc, doc.name);
        const r = await fetch('/wp-json/svntex2/v1/kyc/submit',{method:'POST',credentials:'include',headers,body:fd});
        try{ const j=await r.json(); kycMsg.textContent = j.error?('Error: '+j.error):'Submitted'; }catch(err){ kycMsg.textContent='Done'; }
        loadKyc();
      });
      // Profile
      // Withdrawals
      const wdMsg = document.getElementById('wdMsg');
      async function loadWd(){
        try{
          const r=await fetch('/wp-json/svntex2/v1/withdrawals', { credentials:'include', headers });
          const j=await r.json();
          const items=(j&&j.items)||[];
          document.getElementById('wdList').innerHTML = items.map(w=>`<div class="list-item"><div>#${w.id} · ${w.status}</div><div class="meta">₹${(w.amount||0).toFixed(2)}${w.net_amount?(' · Net ₹'+Number(w.net_amount).toFixed(2)):''}</div></div>`).join('') || 'No withdrawals yet.';
        }catch(e){ document.getElementById('wdList').textContent='Failed to load'; }
      }
      document.getElementById('wdForm').addEventListener('submit', async (e)=>{
        e.preventDefault(); wdMsg.textContent='Requesting…';
        const data = Object.fromEntries(new FormData(e.target).entries());
        const r = await fetch('/wp-json/svntex2/v1/withdrawals/request', { method:'POST', credentials:'include', headers:{...headers,'Content-Type':'application/json'}, body: JSON.stringify(data) });
        const j = await r.json(); if(r.ok && j.withdrawal_id){ wdMsg.textContent='Requested #'+j.withdrawal_id; loadWd(); } else { wdMsg.textContent=(j && (j.error||j.message))||'Failed'; }
      });

      // Support
      const spMsg = document.getElementById('spMsg');
      document.getElementById('spForm').addEventListener('submit', async (e)=>{
        e.preventDefault(); spMsg.textContent='Sending…';
        const data = Object.fromEntries(new FormData(e.target).entries());
        const r = await fetch('/wp-json/svntex2/v1/support/ticket', { method:'POST', credentials:'include', headers:{...headers,'Content-Type':'application/json'}, body: JSON.stringify(data) });
        const j = await r.json(); spMsg.textContent = (r.ok && j && j.ok)? 'Submitted' : ((j && (j.error||j.message))||'Failed');
      });
      const pf=document.getElementById('profileForm'); const pm=document.getElementById('pMsg');
      pf.email.value = me.email||''; pf.first_name.value = me.first_name||''; pf.last_name.value = me.last_name||''; pf.mobile.value = (me.meta&&me.meta.mobile)||'';
      pf.addEventListener('submit', async (e)=>{
        e.preventDefault(); pm.textContent='Saving...';
        const data = Object.fromEntries(new FormData(pf).entries());
        const r = await fetch('/wp-json/svntex2/v1/me', { method:'POST', credentials:'include', headers:{...headers,'Content-Type':'application/json'}, body: JSON.stringify(data) });
        const j = await r.json(); pm.textContent = j && j.id ? 'Saved' : (j.error || 'Failed');
      });
      // Logout
      document.getElementById('logout').addEventListener('click', async (e)=>{ e.preventDefault(); try{ await fetch('/wp-admin/admin-post.php?action=svntex2_logout',{credentials:'include'});}catch(e){} const dest=(location.hostname.replace(/^www\./,'')==='svntex.com')?'https://www.svntex.com/member-v2/':'/member-v2/'; location.href=dest; });

      // Initial lazy loads
  await Promise.allSettled([loadHome(), loadCatalog(), loadCart(), loadOrders(), loadWallet(), loadRef(), loadKyc(), loadWd()]);
    })();
    </script>
  </body>
</html>
